<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wellcome</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
      crossorigin="anonymous"
      defer
    ></script>
  </head>
  <body class="d-flex flex-column">
    <div class="container mt-5">
      <div
        class="row d-flex flex-column justify-content-center align-items-center"
      >
        <div class="col-8">
          <div class="list-group">
            <a
              href="./Lab-Web Fundamentals Introduction/"
              class="ms-2 me-auto list-group-item list-group-item-action d-flex justify-content-between align-items-start"
            >
              <div class="ms-s-me-auto">
                <div class="fw-bold">Web Fundamentals Introduction</div>
                Simple sign in form centered on the page using CSS and HTML
              </div>
              <span class="badge bg-primary rounded-pill">New!</span>
            </a>
            <a
              href="./Laboration 1/"
              class="ms-2 me-auto list-group-item list-group-item-action d-flex justify-content-between align-items-start"
            >
              <div class="ms-s-me-auto">
                <div class="fw-bold">Laboration 1</div>
                Simple sign in form centered on the page using CSS and HTML
              </div>
              <span class="badge bg-primary rounded-pill">New!</span>
            </a>
            <a
              href="./Laboration 2/"
              class="ms-2 me-auto list-group-item list-group-item-action d-flex justify-content-between align-items-start"
            >
              <div class="ms-s-me-auto">
                <div class="fw-bold">Laboration 2</div>
                Rosponsive sign up form for a newsletter
              </div>
              <span class="badge bg-primary rounded-pill">New!</span>
            </a>
            <a
              href="./Laboration 3/"
              class="ms-2 me-auto list-group-item list-group-item-action d-flex justify-content-between align-items-start"
            >
              <div class="ms-s-me-auto">
                <div class="fw-bold">Laboration 3</div>
                Simple website created with bootstrap
              </div>
              <span class="badge bg-primary rounded-pill">New!</span>
            </a>
          </div>
          <p class="text-end">
            <button id="markAll" class="btn btn-primary mt-5">
              Mark all as seen
            </button>
          </p>
        </div>
      </div>
    </div>
    <script>
      let storedItems = localStorage.getItem("jockanStoredVisited")
        ? JSON.parse(localStorage.getItem("jockanStoredVisited"))
        : [];
      let aTags = document.querySelectorAll(".list-group a");

      let localVisited = [];
      if (aTags.length !== storedItems.length) {
        aTags.forEach((element, key, parent) => {
          localVisited[key] = storedItems[key] ? storedItems[key] : false;
        });

        localStorage.setItem(
          "jockanStoredVisited",
          JSON.stringify(localVisited)
        );
      } else {
        localVisited = storedItems;
      }

      aTags.forEach((tag, index, array) => {
        tag.addEventListener("click", (e) => {
          localVisited[index] = true;
          localStorage.setItem(
            "jockanStoredVisited",
            JSON.stringify(localVisited)
          );
        });
      });
      showVisited();
      function showVisited() {
        let spans = document.querySelectorAll(".list-group a span");

        spans.forEach((span, key, parent) => {
          localVisited[key]
            ? span.classList.add("d-none")
            : span.classList.remove("d-none");
        });
      }
      function clearVisited() {
        aTags.forEach((element, key, parent) => {
          localVisited[key] = false;
        });
        localStorage.setItem(
          "jockanStoredVisited",
          JSON.stringify(localVisited)
        );

        showVisited();
        return JSON.parse(localStorage.getItem("jockanStoredVisited"));
      }
      document.querySelector("#markAll").addEventListener("click", (e) => {
        e.preventDefault();
        localVisited.forEach((visited, key) => {
          localVisited[key] = true;
        });
        localStorage.setItem(
          "jockanStoredVisited",
          JSON.stringify(localVisited)
        );
        showVisited();
      });
    </script>
  </body>
</html>
